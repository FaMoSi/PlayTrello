error = require './error-middleware'

module.exports = exec = (f) -> (req, res, next) ->
    f req, (err, result) ->
        return exec.errorCallback req, res, err, 'exec' if err?
        next()

module.exports.defaultErrorCallback = error
module.exports.errorCallback = error
