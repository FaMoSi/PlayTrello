helpers = require '../../src/request-response-helpers'

module.exports =
    "save-flash": (test) ->
        req = session: {}
        helpers req, {}, ->
            req.flash 'message', 'type'
            test.equals req.session.flash.message, 'message'
            test.equals req.session.flash.type, 'type'
            test.done()

    "default flash to info": (test) ->
        req = session: {}
        helpers req, {}, ->
            req.flash 'message'
            test.equals req.session.flash.type, 'info'
            test.done()


    "redirect": (test) ->
        test.expect 2
        res =
            writeHead: (statusCode, header) ->
                test.equals statusCode, 302
                test.equals header["Location"], "/foo/bar"
            end: ->
                test.done()
        helpers {}, res, ->
            res.redirect '/foo/bar'
